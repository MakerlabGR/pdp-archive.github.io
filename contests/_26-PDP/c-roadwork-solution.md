---
layout: solution
codename: roadwork
---
## Λύση $$\mathcal{O}(NL)$$
Διατηρούμε έναν πίνακα $$Τ$$ από booleans με μήκος $$L$$, όπου $$T[i]$$ δείχνει αν το $$[i, i+1]$$ είναι καλυπτόμενo από κάποιο διάστημα. Για να προσθέσουμε ένα διάστημα $$[S, T]$$ σημαδεύουμε όλα σημεία $$T[i] = 1$$ για $$i \in [S, T)$$. Για να βρούμε το μέγιστο κενό, διατρέχουμε τον πίνακα $$T$$ και αναζητούμε για την μέγιστη συνεχόμενη ακολουθία από $$0$$. Το μήκος της είναι το μέγιστο κενό. Προσθέτουμε ένα-ένα τα διαστήματα, και όταν το μέγιστο κενό γίνει μικρότερο από $$X$$, έχουμε βρει την απάντηση.

Κάθε βήμα του αλγορίθμου θέλει στην χειρότερη περίπτωση $$\mathcal{O}(L)$$ χρόνο, άρα η τελική πολυπλοκότητα είναι $$\mathcal{O}(NL)$$ και η μνήμη είναι $$\mathcal{O}(L)$$.

{% include code.md solution_name='roadwork_slow.cc' %}

## Λύση σε $$\mathcal{O}(N^2)$$
Το $$L$$ μπορεί να είναι πολύ μεγάλο, άρα η προηγούμενη λύση είναι αργή. Θα επιταχύνουμε την εύρεση του μεγίστου κενού για τα $$D$$ πρώτα διαστήματα.

### Εύρεση μέγιστου κενού
Παρατηρούμε ότι σημασία για το μέγιστο κενό έχουν μόνο οι αρχές και τα τέλη των διαστημάτων. Επομένως ακολουθούμε τα εξής βήματα:
 1. Ταξινομούμε τις αρχές και τα τέλη των διαστημάτων (με τις αρχές να παίρνουν προτεραιότητα από τα τέλη).
 2. Διατρέχουμε τον πίνακα, και σε κάθε σημείο ξέρουμε ότι είμαστε μέσα σε κάποιο διάστημα αν έχουμε δει λιγότερα τέλη από αρχές. Αν έχουμε δει ίσα, τότε είμαστε εκτός διαστήματος και ξεκινάει ένα κενό (από το τωρινό (τελικό) σημείο στο αμέσως επόμενό του).
 3. Βρίσκουμε το μέγιστο από αυτά τα κενά. 

Για παράδειγμα, για τα διαστήματα $$\lbrace [1, 4], [2, 6], [8, 10] \rbrace$$, η αναπαράσταση είναι η εξής:

![Example](/assets/26-pdp-c-roadwork-example.svg)

| Αρχή $$s(\cdot)$$ / Τέλος $$e(\cdot)$$ | $$s(1)$$ | $$s(3)$$ | $$e(4)$$ | $$e(6)$$ | $$s(8)$$ | $$e(10)$$ |
| Αρχές χωρίς τέλος | $$1$$ | $$2$$ | $$1$$ | $$0$$ | $$1$$ | $$0$$ |

Προσέξτε ότι όταν το πλήθος των αρχών που δεν έχουν τέλος είναι μηδέν, τότε υπάρχει κενό. Το μήκος του κενού που ξεκινάει στο $$e(6)$$ είναι $$8-6=2$$.

**Σημείωση:** Πρέπει να λάβουμε υπόψιν τα κενά στην αρχή και στο τέλος ολόκληρου του διαστήματος.

Αυτό μας δίνει τον αλγόριθμο με πολυπλοκότητα $$\mathcal{O}(N^2)$$ και μνήμη $$\mathcal{O}(N)$$.

{% include code.md solution_name='roadwork_semifast.cc' %}

## Λύση σε $$\mathcal{O}(N \log N)$$
**Παρατήρηση:** Έστω $$x_1$$ και $$x_2$$ το μέγιστο κενό για τα $$k_1$$ και $$k_2$$ πρώτα διαστήματα. Αν $$k_1 < k_2$$, τότε  $$x_1 > x_2$$, καθώς τα κενά μπορούν μόνο να μικρύνουν όταν προσθέτουμε διαστήματα.

Αυτή η μονοτονία μας επιτρέπει να κάνουμε δυαδική αναζήτηση στο πρώτο $$k$$ για το οποίο το μέγιστο κενό είναι μικρότερο από $$X$$. Άρα χρειάζεται να τρέξουμε τον παραπάνω αλγόριθμο $$\mathcal{O}(\log N)$$ φορές.

Ο αλγόριθμος αυτός έχει πολυπλοκότητα $$\mathcal{O}(N \log N)$$ για την ταξινόμηση και $$\mathcal{O}(N)$$ για την εύρεση του κάθε μέγιστου κενού. Χρειάζεται $$\mathcal{O}(N)$$ μνήμη.

{% include code.md solution_name='roadwork_efficient.cc' %}

**Σημείωση:** Το πρόβλημα μπορεί να λυθεί και με την χρήση δομών δεδομένων όπως τα sets και τα segment trees, χωρίς την χρήση δυαδικής αναζήτησης στην απάντηση.