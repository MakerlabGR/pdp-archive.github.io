---
layout: solution
codename: hiring
---

## Επεξήγηση εκφώνησης

Σε αυτό το πρόβλημα μας δίνονται τρία συμβόλαια για κάθε έναν από $$N$$ πιτσαδόρους, με τιμές απόδοσεις $$A_i \leq B_i \leq C_i$$ για τον $$i$$-οστό πιτσαδόρο. Σκοπός είναι να αναθέσουμε ένα από τα τρία συμβόλαια στον κάθε πιτσαδόρο ώστε να μεγιστοποιήσουμε την απόδοση, δεδομένου ότι μπορεί να έχουμε το πολύ $$Χ$$ συμβόλαια του πρώτου τύπου (χάλκινα), $$Y$$ του δεύτερου (ασημένια) και $$Z$$ του τρίτου (χρυσά). 

## Λύση ωμής βίας

Μπορούμε να δοκιμάσουμε όλους τους δυνατούς τρόπους να αναθέσουμε συμβόλαια στους πιτσαδόρους ώστε να ικανοποιούνται οι περιορισμοί, και επιλέγουμε αυτό που μεγιστοποιεί την απόδοση.

Υπάρχουν το πολύ τρία δυνατά συμβόλαια για κάθε πιτσαδόρο, επομένως πρέπει να ελέγξουμε το πολύ $$O(3^N)$$ δυνατούς τρόπους, που είναι εκθετικά πολλοί, και περνάει μόνο το πρώτο subtask. Μία ενδεικτική αναδρομική υλοποίηση είναι η παρακάτω.

{% include code.md solution_name='hiring_brute_force.cc' start=16 end=24 %}

Δείτε ολόκληρο τον κώδικα [εδώ]({% include link_to_source.md solution_name='hiring_brute_force.cc' %}).

## Λύση για το 2ο και 3ο subtask

Στο 2ο και 3ο subtask υπάρχουν μόνο δύο είδη συμβολαίων (ας υποθέσουμε μόνο χάλκινα και ασημένια). Ξέρουμε ότι κάθε συμβόλαιο θα είναι είτε χάλκινο με απόδοση $$A_i$$ είτε ασημένιο με απόδοση $$B_i$$, και ότι $$B_i \geq A_i$$. Άρα αυτό που κερδίζουμε κάνοντας το $$i$$-οστό συμβόλαιο ασημένιο είναι η διαφορά $$B_i - A_i$$. Επομένως, για να μεγιστοποιήσουμε την συνολική απόδοση, ταξινομούμε ως προς τις διαφορές και βάζουμε τις $$Y$$ μεγαλύτερες. 

{% include code.md solution_name='hiring_subtask_2.cc' start=26 end=34 %}

Η ταξινόμηση χρειάζεται $$O(N \log N)$$ χρόνο, συνεπώς ο αλγόριθμος χρειάζεται $$O(N \log N)$$ χρόνο. Μπορούμε επίσης να χρησιμοποιήσουμε τον αλγόριθμο για το nth_element, για να ρίξουμε την πολυπλοκότητα σε $$O(N)$$. Δείτε ολόκληρο τον κώδικα [εδώ]({% include link_to_source.md solution_name='hiring_subtask_2.cc' %}) και [εδώ]({% include link_to_source.md solution_name='hiring_subtask_3.cc' %}).

## Λύση για το 4ο subtask

Σε αυτό το subtask μας δίνεται επιπλέον ότι $$A_1 = \ldots = A_N$$, $$B_1 \leq \ldots \leq B_N$$ και $$C_1 \geq \ldots \geq C_N$$. Η βασική παρατήρηση εδώ είναι ότι μας συμφέρει να βάλουμε τα πρώτα $$Z$$ στα χρυσά και τα τελευταία $$Y$$ από τα υπόλοιπα στα ασημένια. Αυτό μπορεί να υλοποιηθεί με τον εξής άπληστο αλγόριθμο:

{% include code.md solution_name='hiring_subtask_4.cc' start=16 end=22 %}

Ο αλγόριθμος διατρέχει μία φορά τα δεδομένα επομένως χρειάζεται $$O(N)$$ χρόνο και χρησιμοποιεί $$O(1)$$ μνήμη. Δείτε ολόκληρο τον κώδικα [εδώ]({% include link_to_source.md solution_name='hiring_subtask_4.cc' %}).

## Λύση για το 5ο subtask

Το 5ο subtask μοιάζει με το 2ο και το 3ο, με την διαφορά ότι έχουμε και ένα χρυσό συμβόλαιο. Αυτό που μπορούμε να κάνουμε είναι να θεωρήσουμε κάθε μία από τις $$Ν$$ πιθανές εκδοχές για το ποιος θα πάρει χρυσό συμβόλαιο και τα συμβόλαια των υπόλοιπων πιτσαδόρων να τα αναθέσουμε με τον αλγόριθμο που χρησιμοποιήσαμε προηγουμένως. Κάτι τέτοιο θα χρειαζόταν $$O(N^2 \log N)$$ χρόνο που είναι σχετικά αργό. Αυτό όμως που μπορούμε να δούμε είναι ότι κάθε φορά που δοκιμάζουμε ένα άλλο $$i$$ για να είναι το χρυσό συμβόλαιο, η λύση δεν αλλάζει πολύ. Για την ακρίβεια υπάρχουν οι εξής δύο περιπτώσεις:
 1. Το $$i$$ δεν είναι στις $$Y$$ μεγαλύτερες διαφορές $$B_i - A_i$$, επομένως η λύση αλλάζει κατά $$C_i - A_i$$. 
 2. Το $$i$$ είναι στις $$Y$$ μεγαλύτερες διαφορές $$B_i - A_i$$, επομένως η λύση αλλάζει κατά $$C_i - B_i$$ συν $$B_j - A_j$$ (όπου $$j$$ είναι το στοιχείο με την $$Y+1$$-οστή μεγαλύτερη διαφορά).
 
Ο παρακάτω κώδικας υλοποιεί αυτήν την ιδέα και χρειάζεται $$O(N \log N)$$ χρόνο. 
{% include code.md solution_name='hiring_subtask_5.cc' start=36 end=49 %}

Δείτε ολόκληρο τον κώδικα [εδώ]({% include link_to_source.md solution_name='hiring_subtask_5.cc' %}).
